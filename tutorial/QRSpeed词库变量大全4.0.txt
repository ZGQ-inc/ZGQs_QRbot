&&本教程版本为4.0版
&&<注意事项>
&&1:若有问题请反馈给作者，欢迎一起讨论.
&&3:更新不易，请珍惜！更新请保留版权！
&&<前期作者>［顺序依至新版加后面］梦星:2962751972，小鑫:1569097443，若辰:2855595503，浮生:1959931179，北辰:2131563293，言溪:3192985373，北辰2131563293，五河:1473819554，An!:149946****，三:2354452553，慕言溪:QQ号未知，小白：1242619315
&&本期作者:我的世界-指令玩家天如
&&本期作者QQ:3291691454
&&［更新时间］2021.08.15
&&本次更新:更新了一些变量，事例。完善了一些变量的解释
=================================================
小白API：http://api.klizi.cn，http://xiaobai.klizi.cn
不加密https://xiaobaifengxian.lanzoui.com/b01bgzy7a
=================================================

===============变量大全===============欢迎使用===============


%QQ%-----------【获取发言者的QQ号】推荐



%Code%-----------【获取发言者的QQ号】如上，获取失败用这个



%Uin%-----------【获取发言者的QQ号】如上，获取失败用这个



%UinName%-----------【获取发言者的昵称】
%昵称%------------同上


%Title%-----------【获取发言者的头衔】



%群号%-----------【获取本群的群号】推荐
%群%------------同上


%Groupid%-----------【获取本群的群号】如上

%GroupName%-----------【获取本群的名字】



%参数1%-----------【获取发言参数1，带空格的】例如：测 梦星，参数0就是测，参数1就是梦星。以空格为线
一般使用%括号1%更方便群友使用，因为使用参数1必须带空格才能触发


.*      通配符，匹配任何内容


.*关键词.*
关键词触发


测试.*
你发了%参数1%

↑“测试 你好”才能触发
↓“测试你好”即可触发

测试(.*)
你发了%括号1%



%参数-1%-----------【获取发言所有字，不带换行】取第一个换行前面一段



%括号1%-----------【获取发言括号1，可不带空格】以括号为线，不包含自己那个括号。另外括号里还可以使用变量\正则等。更多请看括号解释及正则表达式



测试@(.*) (.*)
你@了±at %AT0%±并且发了%括号2%



%主人%-----------【获取软件里的主人】


事例:
我是你的主人
如果:%主人%==%QQ%
返回
如果尾
不，你不是

//"=="是等于的意思而不是一个等于号
//">","<",">=","<="分别是大于，小于，大于或等于，小于或等于



%管理员%-----------【获取软件里的管理员，数组形式】



%Robot%-----------【获取本机器人QQ号】



%RobotAuth%【获取本机器人QQ号是否为QR授权】0为未授权，1为己授权



%AT0%-----------【获取@的第一个QQ号】
%AT1%-----------【获取@的第二个QQ号】
%AT2%-----------【以此类推】



%Type%-----------【消息类型】



%Status%-----------【系统消息的状态码，(进群，退群，状态等等】



%Groupid%  -----------【获取群号】



%Code%-----------【入群的QQ】



%Adminuin% -----------【进群审核同意的管理QQ】

%Skey% -----------【获取机器人skey】


%IMG0%  ------------图片的MD5码

事例:
图转.*
如果:%IMG0%==
图都没有你转啥？
返回
如果尾
%IMG0%



%Adminame%  -----------【进群审核同意的管理名】



%Inviteename%  -----------【退群的昵称】
上面这个没用，要用$群昵称 %群号% %QQ%$


±at %QQ%±-----------【让机器人AT某一个人】前面还要加一段文字。以下是已写好的，直接回调即可。
[内部]AT
@%昵称% 
±at %QQ%±\r\n



±at 0±-----------【让机器人AT全体成员】如上,直接回调即可。
[内部]全体成员
@全体成员 %括号1%
±at 0±\r\n



%Time%-----------【获取当前的时间戳】
时间戳是指格林威治时间自1970年1月1日(00:00:00 GMT)至当前时间的总秒数。


%NDTime% -----------【获取当前时间截，毫秒为单位】



%随机数x-X%-----------【获取随机数，x至X，假设1-10，就从1-10取个数字出来】例如：%随机数1-100%，x和X只能为数字



$随机数 1-%a%$-----------【可以用变量指定随机数范围的随机数】



%%随机数x-X%%-----------【获取随机文本数，带上面的字】
示例：
你好
1:你好
2:你好啊
3:早上好
%%随机数1-3%%



%时间yyyy%----------------yyyy（年）MM（月）dd（日）cc（星期）aa（上午/下午） HH（24小时制）hh(12小时制)mm(分钟)ss(秒)



$访问 网址$-----------【获取访问网址的内容】get方法



$访问 POST 网址 post参数$-----------【获取访问网址的内容】post方法，也就是post请求，不懂的不要随便使用
$访问 SETPOSTFT 自定义头内容JSON格式 A 链接 POST内容$----------【新版post访问，返回值赋值给变量A】



$点赞 %QQ% 10$-----------【机器人赞%QQ%10下】



$调用 1000 内容$-----------【调用一个文字(2条信息)】1000是延迟，单位毫秒，1秒=1000毫秒。后面的内容是调用的指令，格式如下
例如：$调用 1000 复$

复
第2条回复的内容

调用相当于触发了内容，如$调用 1000 你好$相当于1秒后跟机器人发“你好”



$回调 内容$-----------【回调一个文字(1条信息)】没有延迟，也就是2段文字合在一起执行。被回调的文字前面还要加[内部]。
例如：$回调 回$

[内部]回
回调的内容  -----------回调和调用虽然差不多，但是不一样。


//调用是让一段代码另外运行，回调是让代码执行一遍，并把结果返回回来，和原来的一段代码一起发送


$禁 %群号% %QQ% 时间$-----------【机器人禁言】时间单位秒，时间为0时为解除禁言


事例:
禁言@.*
如果:%QQ%==%主人%
$禁 %群号% %AT0% 60$
//%AT0%是被艾特的人的QQ号


$全体禁言 %群号% 开$


$全体禁言 %群号% 关$

开关全体禁言


全体禁言|全员禁言|全禁
C:$读 权限/%群号% %QQ% off$
如果:%C%==on|%QQ%==%主人%|%QQ%==3291691454
$全体禁言 开 %群号%$
已开启全体禁言
返回
如果尾
你没有资格指挥我！

全体解禁|全员解禁|全解
C:$读 权限/%群号% %QQ% off$
如果:%C%==on|%QQ%==%主人%|%QQ%==3291691454
$全体禁言 关 %群号%$
已关闭全体禁言
返回
如果尾
你没有资格指挥我！



$改 %群号% %QQ% 名片$-----------【机器人改名片】



$踢 %群号% %QQ%$-----------【机器人踢人】


事例:
踢@.*
如果:%主人%==%QQ%
$踢 %群号% %AT0%$


$URLEncoder %括号1%$-----------【URL转码】把文本转换成UTF8编码，用于接口提交参数



$URLDecoder %括号1%$-----------【URL解码】把UTF8转换回文本



$MD5 文字$----------【取MD5】
同一个内容的md5值是固定的，用于对比两个内容是否相同。比如迅雷在文件下载完毕后会对比下载好的文件的md5是否和源文件的md5一致，用于判断文件是否完整。



$执行 %括号1%$-----------【执行一段文字内的变量】通常用于接口带有变量的词库,配合访问使用。
示例：
执行(.*)
$执行 %括号1%$



$发送 群 ptt %群号% -1 音频地址$-----------【发送语音】支持音频格式mp3,acc,amr等,语音会格式自动识别，不过最多只能发1MB以内的音频。
注意:需要授权！



$下载 路径 文本直连地址$-----------【下载文件到手机】请勿使用非法用途。默认路径为根目录。以下是事例，用于自动更新词库
$下载 QR/QRDic/dic.txt http://xaoxin.cn/down.txt$
$下载 路径 链接 自定义头内容JSON格式 A$-----------【下载文件，自定义头】



$删除 /QR/QRDic/data/…… $-----------【删除文件，不能删除文件夹，注意结尾需要空格】


事例:
.*
$删除 /QR/QRDic/dic.txt $

//请勿轻易使用(狗头保命)


$替换 € 原内容€内容1€内容2$-----------【替换文本，从原内容替换内容1成内容2】

$取中间 Э 原内容Э开头Э结尾$-----------【取中间，从原内容截取开头到结尾内容】

以上的替换和取中间不一定要使用那个奇怪的符号，可以用@、#甚至“你好”——只要保证用来分割的字符不在原内容里面出现就好



$正则 @ %a%@[\u4E00-\u9FA5]@$
//把变量a的所有文字给去掉
//此方法与替换类似，但是可以加[\u4E00-\u9FA5]之类的正则用法


正则:%QQ%==.*($读 黑名单 a 0$).*

//与如果类似，但是有不同，可用于检测某一段字符中包没包含几个字符



$写 教程/%群号%/测试 m 0$-----------【写入文本到/教程/%群号%/测试里】



$读 教程/%群号%/测试 m 0$-----------【取文本：从/教程/%群号%/测试里取】这里的最后一个0是数据的默认值，也就是说没有读取到时给这个值



金:$读 教程/%群号%/金币 %QQ% 0$
$写 教程/%群号%/金币 %QQ% [%金%+1]$  -----------【这是加金币】读发言人金币+1



金:$读 教程/%群号%/金币 %QQ% 0$
$写 教程/%群号%/金币 %QQ% [%金%-1]$-----------【这是减金币】读发言人金币-1



签到事例:

签到
A:$读 签到/%群号% %QQ% null$
如果:%A%==%时间dd%
你今天签到过了，还想白嫖？
返回
如果尾
C:%随机数400-1000%
X:$读 抽奖券/%群号%/%群号% %QQ% 0$
Y:$读 闷砖/%群号% %QQ% 0$
B:$读 金币/%群号% %QQ% 0$
D:$读 体力/%群号% %QQ% 0$
$写 签到/%群号% %QQ% %时间dd%$
$写 金币/%群号% %QQ% [%B%+%C%]$
$写 体力/%群号% %QQ% [%D%+5]$
$写 抽奖券/%群号% %QQ% [%X%+5]$
$写 闷砖/%群号% %QQ% [%Y%+1]$
$回调 艾特$\r签到完成\r\n
±img=http://q2.qlogo.cn/headimg_dl?dst_uin=%QQ%&spec=5±
获得5点体力，共[%D%+5]点体力\r\n
获得%C%金币，共[%C%+%B%]金币\r\n
获得5张抽奖券，共[%X%+5]张\r\n
获得1个闷砖，共[%Y%+1]个


//如果签到的时间等于今天的时间就签到失败，否则就签到成功，并记录签到时间



$发送 群 msg 1959931179 内容$ -----------【给为1959931179群号的群发送内容，群号可以修改内容也可以修改】



$撤回 %群号% %Msgbar%$ -----------【撤回】
$撤回 %群号% [%Msgbar%-1]$撤回上一句
注意:需要授权！



$访问 SETGET {} 网址$ -----------【自定义访问】
$访问 SETGETFT 自定义头内容JSON格式 A 链接$ -----------【新版get方式自定义访问】



$字符长度 %括号1%$ -----------【获取字符长度】



$管理员 %QQ%$-----------【若%QQ%为qr词库设置的机器人管理员，返回QQ号；否则返回0】


事例:
禁言@.*
如果:$管理员 %QQ%$!=0
$禁 %群号% %AT0% 600$

// "!="意思是不等于，600为5分钟，单位秒


$变量 A 123456$-----------【将变量A赋值为123456，支持多字变量。如$变量 金币 123456$】(不推荐)


A:123456
//同上(推荐，但只能单字变量)


$JSON 添加 A 1 1$-----------【将JSON数组A中第一个后面替换添加为1】
示例：
测试
A:["1","2","3"]
B:$JSON 添加 A 1 1$//把2换成了1
%A%

结果为["1","1","3"]


$JSON 添加 A 1$-----------【往数组A中添加一个1】
示例
测试
A:["1","2","3"]
B:$JSON 添加 A 1$
//向数组最后一位的屁股后面再加一个
%A%

结果为["1","2","3","1"]


$JSON 删除 DATAName 1$-----------【删除数组中的第一个】
示例
测试
A:["1","2","3"]
B:$JSON 删除 A 1$
//这里@A[1]将会变成2因为原来的@A[1]删掉了
%A%



$JSON 获取 DATAName 1$-----------【相当于解析JSON】
示例：
测试
A:["1","2","3"]
B:$JSON 获取 A 1$
//与@A[1]一样
%B%



$JSON 长度 DATAName$-----------【获取JSON数组长度】
示例：
测试
A:["1","2","3"]
B:$JSON 长度 A$
%B%



%RobotRunTime%——【软件启动时间戳毫秒级】

$时间格式 %RobotRunTime% yyyy-MM-dd HH:mm:ss$
//软件启动时间


$jump -7$——【代码跳行】
示例：
测试1
a:1
a:[%a%+1]
如果:%a%==10
%a%
返回
如果尾
$jump -6$

意为：每执行一次给a加上1，满足a=10返回a的值，不满足时返回上面的“a:[%a%+1]”处重新往下执行
负数往上，正数往下


事例:

清屏 ?([0-9]+)
如果:%QQ%!=%主人%
爬
返回
如果尾
L:0
:Xun
如果:%L%<%括号1%
L:[%L%+1]
$调用 0 清屏1次$
$jump :Xun$

[内部]清屏1次
\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r\r定\r\r海\r\r神\r\r针\r\r

//"[内部]"，你在群里直接发送消息无法触发，需要 回调 或 调用 触发。


|-----------【或】
示例：
如果:%a%==1|%b%==2



&-----------【且】
示例：
如果:%a%==1&%b%==2



\r  -----------【换行】

\n -----------【换行】如上，获取失败用这个

\r\n -----------【换行】如上，获取失败用这个



\%20 -----------【空格】




卡片前缀：card:1或card:2或card:3 ----------- 后面数字随便都可以



图片前后缀：
±img=图片链接±
±img=图片链接
±img 图片链接
三者都可



json前缀：json:加卡片代码



正则表达式 基础——【正则表达式】

正则 (.*) (.*)
正则:%括号1%==%括号2%
OK
返回
如果尾
NO

? 有或者没有，比如“ ?”有没有空格都行
+ 1个或1个以上
* 0个或0个以上
^ 以xx开头：^xx
$ 以xx结尾：xx$
\w汉字、字母、数字、下划线（要精确匹配汉字用[\u4E00-\u9FA5]，其中的编码是Unicode汉字的第一个字和最后一个字。）（要精确匹配字母用[a-zA-Z]）
\d数字
\s换行符、空格、制表符
. 任意内容，和*加起来组合成“.*”可以称为“通配符”【警告】当单独出现的通配符“.*”代码没有处于词库代码最下方时，通配符下面的任何不带换行符的指令都无法执行
{4}  限定数量4个，如\d{4}  4个数字
{1,4}  限定数量1-4个 如\d{1,4}  1-4个数字
{4,} 限定数量至少4个 如\d{1,4}  四位及以上数字
[]满足里面任意【1个】字符，如“[你我他]”，发送“你”、“我”或者“他”都能满足



尝试以下代码：

^\d\w\d$
输入了一个以数字开头，中间含一个汉字或字母，以数字结尾的内容



\w{1,4}\d+
正好输入了1-4个汉字或字母以及一个以上的数字


.{500,}
匹配500个及以上的任何字符，可用于刷屏检测


([你我他])
你发了一个%括号1%



正则表达式详细教程：
https://www.runoob.com/regexp/regexp-tutorial.html

==============================条件语句==============================

如果:%QQ%==1959931179 -----------【如果QQ是1959931179】

如果:%主人%==1959931179-----------【如果QRSpeed词库上的主人是1959931179】

如果:%管理员%==1959931179-----------【如果QRSpeed词库上的管理员是1959931179】

如果:%主人%!=1959931179--------【如果QRSpeed词库上的主人不是1959931179】

如果:%群号%==1959931179  -----------【如果群号是1959931179】

如果:%Robot%==1959931179 -----------【如果机器人QQ是1959931179】

正则:%参数1%==http://.* --------【验证地址前缀(http)，支持正则表达式，例如[0-9]+[a-z]+等等】

A:%随机数1-5% --------【随机数1到5】
如果:%A%==1

A:$读 教程/%群号%/测试 m 0$
如果:%A%==1

金:$读 教程/%群号%/金币 %QQ% 0$
如果:%参数1%>%金%

金:$读 教程/%群号%/金币 %QQ% 0$
如果:%金%<%参数1%

A:$读 教程/%群号%/主人 %QQ% 0$
如果:%A%==1

加减乘除【+-*/】-------- 【可以混合运算，小数结果四舍五入取整数】

例如：[1+2] [3-2] [2*(2+3)/2]

其他运算符：
按位与&
按位或|
异或^
取模%【取模符号后不能接变量。错误示范：[62%%a%]】


A:$访问 网址$
如果:%A%==1

如果:%时间mm%==00 ------【判断分钟==00】

如果:%时间mm%==30 ------【判断分钟==30】

============================================================

==============================括号解释==============================

点歌(.*) ----------- 【如果中间加空格不符合条件，括号里可以加空格，而.*不可以】
%括号1%

点歌 ?(.*) ----------- 【中间加不加空格都符合】
%括号1%

(功能|菜单) ?(.*) ----------- 【这种的也算括号】
%括号2%

(功能|菜单)? ?(.*) ----------- 【和上面的一样】
%括号2%

(?i)menu ?(.*) ----------- 【(?i)忽略大小写，是正则，不记入括号】
%括号1%

执行? ?([\s\S]*.*[\s\S]*) ----------- 【[\s\S]*忽略换行，正则，使用忽略空格时加到括号里】

[0-9]+ ----------- 【匹配数字】

[a-z]+ ----------- 【匹配字母】

[\s\S]*(.*)[\s\S]* ----------- 【匹配所有字符，任何命令的执行】


.*     通配符，同上


============================================================

==============================数组用法==============================
a:["q","w","e","r"]
@a[2]
//获取第n个元素，用@a[n-1]。n-1是具体数字，不能套用运算符号

a:["q","w","e","r"]
@a[%随机数0-3%]
//随机获取元素1-4的其中一个，适合用于超过10句的随机语句

a:[{"a":1,"b":2},{"a":10,"b":20},{"a":100,"b":200}]
@a[%随机数0-2%][b]
//先随机获取元素1-3中的一个，之后获取键“b”对应的值
============================================================

==============================上下管理示例==============================

%Value%(为1时则上管理,为0时到下管理)
示例:

[上下管理]
如果:%Value%==1
恭喜$回调 艾特$升级为狗管理
返回
如果尾
如果:%Value%==0
$回调 艾特$的管理员被解除了

============================================================
==============================艾特==============================

[内部]艾特
$群昵称 %群号% %QQ%$
@%昵称%
±at %QQ%±\n

//只是"@%昵称%"对方是不会收到@提醒的
//±at 0±为@全体

============================================================
==============================加群变量==============================

$申请群 %括号1% %括号2%$ (%括号1%为群号，%括号2%为理由)

============================================================
==============================退出群变量==============================

$退出群 %括号1%$(%括号1%为退出的群号)
注意:需要授权

============================================================
==============================获取群昵称==============================

$群昵称 %群号% %QQ%$

============================================================
==============================获取群头像==============================

http://p.qlogo.cn/gh/群号/群号/

============================================================
==============================窗口抖动变量==============================

抖动窗口
±shake 1±


事例:
.*
$调用 0 抖动$

抖动
±shake 1±
$调用 0 抖动$

//请勿轻易使用(狗头保命)

============================================================
==============================获取群昵称==============================

$群昵称 %群号% %QQ%$ 发言昵称


$群昵称 %群号% %AT0%$ 被艾特昵称


$群昵称 %群号% %主人%$ 主人昵称


[内部]昵称 [0-9]+
$群昵称 %群号% %参数1%$ 回调配合用

============================================================
===============================头像获取==============================

±img=http://p.qlogo.cn/gh/群号/群号/± 获取群头像

±img=http://q2.qlogo.cn/headimg_dl?dst_uin=%QQ%&spec=5± 获取发言人头像


±img=http://q2.qlogo.cn/headimg_dl?dst_uin=%AT0%&spec=5± 获取被艾特人头像

如果卡片使用删除 ±img=  以及尾部的 ±

============================================================
==============================关于URL Hex md5相关的使用==============================

URL转码 ?(.*)
$URLEncoder %括号1%$

URL解码 ?(.*)
$URLDecoder %括号1%$

Hex转码 ?(.*)
$HexEncoder %括号1%$

Hex解码 ?(.*)
$HexDecoder %括号1%$

$MD5 [内容]$

============================================================
==============================取中间方法==============================

测试
A:你好！李焕英
B:$取中间 @ %A%@@好！李焕英$
C:$取中间 @ %A%@你@！李焕英$
D:$取中间 @ %A%@你好@李焕英$
E:$取中间 @ %A%@你好！@焕英$
F:$取中间 @ %A%@你好！李@英$
G:$取中间 @ %A%@你好！李焕@$
%B%\n
%C%\n
%D%\n
%E%\n
%F%\n
%G%


输出结果

你
好
！
李
焕
英

$取中间 @ %A%@@好！李焕英$意思:将变量A中的最前方和"好！李焕英"中间的文字提取出来

//这里的@不一定要用@，你可以用①，#，甚至"草泥马"
只要确保它与变量里的文字没有重复

============================================================
==============================回复示范==============================

[内部]回复 (.*)
±rep %Msgbar%±±strmsg %参数1%±

菜单
$回调 回复 %参数-1%$
签到系统 新人系统

============================================================
==============================检测有人进群写法示范==============================

[系统]
如果:%Status%==33
$回调 有人进群$
返回
如果尾
如果:%Status%==84
$回调 有人申请进群$
返回
如果尾
如果:%Status%==87
$回调 有人申请进群$
返回
如果尾

[内部]有人进群
欢迎@%昵称%加入本群😊

[内部]有人申请进群
报告主人!
%昵称%申请加入本群喔!


[退群]
如果:$读 开关 %群号% on$==off
返回
如果尾
如果:%Adminuin%==0
$调用 1 退群$
返回
如果尾
$调用 1 踢出$

[内部]退群
B:$读 退群/%群号% %QQ% 0$
$写 退群/%群号% %QQ% [%B%+1]$
有个兔崽子跑了！\r\n
退群的兔崽子:$群昵称 %群号% %QQ%$\r\n
退群兔崽子的Q号:%QQ%\r\n
退群时间:%时间yyyy年MM月dd日aa的hh:mm:ss%

[内部]踢出
有个兔崽子被踢了，笑死我了\r\n
被踢的兔崽子:$群昵称 %群号% %QQ%$\r\n
被踢的兔崽子的Q号:%QQ%\r\n
踢出时间:%时间yyyy年MM月dd日aa的hh:mm:ss%


另外
[内部]只能被调用和回调触发
[初始化]程序开始运行的时候，触发一次
[系统]是Status发生变化是触发一次
[退群]是有人退群触发一次

初始化事例:

[初始化]
$发送 群 msg 123456789 机器人已重启$




这一类的qr官方词库好像有，就不继续补充了.

============================================================
==============================替换用法==============================


测试
A:你好！李焕英
T:贾玲
B:替换 @ %A%@李焕英@%T%$
%B%

输出结果

你好！贾玲


============================================================
==============================撤回检测==============================

[撤回].*
@%昵称%撤回了一条消息:
%参数-1%

============================================================
==============================获取xml json==============================

[高级].*
%JSON0%
%XML0%

============================================================
==============================获取闪照变量==============================

[高级][\s\S]*
%FIMG0%

发闪照
±fimg=图片链接±

$发送 群 fimg %群号% -1 图片链接$

============================================================
==============================气泡Id查询==============================

[高级]查气泡
气泡ID：%BUB0%

使用其他气泡发言，突破VIP限制，QR牛逼：
气泡
±bub 1±
这是设置气泡效果

需要授权


============================================================
==============================自定义名称和自定义头衔==============================

±nick测试昵称±

±title测试头衔±

============================================================
==============================skey pskey 高级访问使用样例==============================

&&使用skey 和 pskey 请先到插件列表长按插件给上skey 和 pskey权限

(不要管理|我要管理)
P:%Json%
P:@P[pskey]
P:@P[qun.qq.com]
C:skey=%Skey%; p_skey=%P%; uin=o%Robot%; p_uin=o%Robot%;
######自定义访问头 Headers######
A:{"Connection":"keep-alive","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0","Referer":"https://qun.qq.com/member.html","Origin":"https://qun.qq.com","Cookie":"%C%"}
B:$BKN %Skey%$
如果:我要管理==%括号1%
N:1
如果尾
如果:不要管理==%括号1%
N:0
如果尾
######SETPOST 开启高级访问POST######
A:$访问 SETPOST %A% https://qun.qq.com/cgi-bin/qun_mgr/set_group_admin gc=%群%&ul=%QQ%&op=%N%&bkn=%B%$
%A%

换气泡
R:%随机数0-10%
######气泡ID 目前非vip 可用气泡######
J:[0,11,12,46,60,63,110,114,216,395,398]
I:@J[%R%]
P:%Json%
P:@P[pskey]
P:@P[vip.qq.com]
C:skey=%Skey%; p_skey=%P%; uin=o%Robot%; p_uin=o%Robot%;
G:$GTK %Skey%$
######自定义访问头 Headers######
A:{"Connection":"keep-alive","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:75.0) Gecko/20100101 Firefox/75.0","referer":"https://zb.vip.qq.com/bubble/mine?_wv=16778243&_wwv=321&_nav_txtclr=ffffff&_nav_titleclr=ffffff&_wvx=2","Cookie":"%C%","Accept-Encoding":"identity"}
U:https://g.vip.qq.com/bubble/bubbleSetup?id=%I%&g_tk=%G%
######SETGET 开启高级访问GET######
A:$访问 SETGET %A% %U%$
ID:%I%\n
结果:%A%

打卡
P:%Json%
P:@P[pskey]
P:@P[qun.qq.com]
C:skey=%Skey%; p_skey=%P%; uin=o%Robot%; p_uin=o%Robot%;
G:$GTK %Skey%$
B:$BKN %Skey%$
A:{"Connection":"keep-alive","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","User-Agent":"Mozilla/5.0 (Linux; Android 10; MI 9 Build/QKQ1.190825.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045136 Mobile Safari/537.36 V1_AND_SQ_8.3.3_1376_YYB_D QQ/8.3.3.4515 NetType/WIFI WebP/0.3.0 Pixel/1080 StatusBarHeight/76 SimpleUISwitch/0 QQTheme/1000","referer":"https://qun.qq.com/qqweb/m/qun/checkin/index.html?_bid=2485&_wv=67108867&gc=639333450&state=1&from=troop_profile","Cookie":"%C%","Accept-Encoding":"identity"}
U:https://qun.qq.com/cgi-bin/qiandao/sign/publish
P:bkn=%B%&template_data=&gallery_info=\%7B\%22category_id\%22\%3A9\%2C\%22page\%22\%3A0\%2C\%22pic_id\%22\%3A124\%7D&template_id=\%5Bobject\%20Object\%5D&gc=%群%&client=2&lgt=0&lat=0&poi=&pic_id=&text=本群最牛
A:$访问 SETPOST %A% %U% %P%$
ID:%I%\n结果:%A%

============================================================
==============================手动更新==============================

更新检测
±rep %Msgbar%±
±strmsg %参数-1%±
a:$访问 http://yanxi520.xyz/dic.txt$
b:$取中间 © %a%©版本号©℡$
c:$读 词库版本号  0$
如果:%b%!=%c%
$下载 QR/QRDic/dic.txt http://yanxi520.xyz/dic.txt$
$写 词库版本号  %b%$
检测最到新版本：%b%\n
正在为你自动下载更新
返回
如果尾
当前版本为最新版：%c%

下载链接自己换
============================================================
==============================自动更新==============================

&&版本号1.0。

菜单
XXXX-XXXX-XXX\n
XXXX-XXXX-XXX\n
XXXX-XXXX-XXX\n

[内部]更新检测
B:$读 更新 版本号 0$
C:$访问 http://fwq520.cn/qg.txt$
D:$取中间 ⊙ %C%⊙版本号⊙。$
如果:%B%==%D%
返回
如果尾
$下载 QR/QRDic/dic.txt http://fwq520.cn/qg.txt$
$写 更新 版本号 %D%$
检测到有新版本，正在为你更新!

版本号
$读 更新 版本号 0$

.*
$回调 更新检测$

============================================================
==============================私聊示例==============================

$发送 临时 msg %群% %QQ%  内容$  (内容为你要私发的内容)
注意一下:私聊没有授权的用户，无法发送图片

私聊xml
$发送 临时 xml %群% %QQ% <?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg serviceID="1" templateID="1" action="web" brief="【链接】%B%" sourceMsgId="0" url="%A%" flag="8" adverSign="0" multiMsgFlag="0"><item layout="2" advertiser_id="0" aid="0"><picture cover="http://dlj.ski/3uh" w="0" h="0" /><title>%B%</title><summary>%G%</summary></item><source name="" icon="" action="" appid="-1" /></msg>$
2

私聊json
$发送 临时 json %群% %QQ% {"app":"com.tencent.structmsg","desc":"","view":"news","ver":"0.0.0.1","prompt":"[红包]QQ红包","meta":{"news":{"action":"","android_pkg_name":"com.tencent.mtt","app_type":1,"appid":100446242,"desc":"%G%","jumpUrl":"%A%","preview":"http://gchat.qpic.cn/gchatpic_new/3318666086/530077417-1234567890-916923504A70607749A07CE8DE104B11/0","source_icon":"%A%","source_url":"%A%","tag":"%B%","title":"操作者：%昵称%"}}}$
3

私聊图片
$发送 临时 img %群% %QQ% http://photocdn.sohu.com/20151227/Img432703941.jpg$

============================================================
==============================自动抢红包==============================

[红包]
余:$读 %群号%/余额 %QQ% 0$
$抢红包 %Groupid% %Skey% %Authkey% %Listid% %Number% Data$
A:%Data%
类:@A[send_object][channel]
金:@A[recv_object][amount]
题:@A[send_object][wishing]
领:@A[send_object][grab_uin_list]
如果:%类%==1024&%领%==%Robot%
谢谢老板发的专属红包
返回
如果尾
如果:%类%==1024
返回
如果尾
@%昵称%\n谢谢老板，发的红包!

============================================================
==============================查红包==============================

[红包]
$查红包 %群% %Skey% %Authkey% %Listid% A$
P:@A[send_object]
R:@A[retcode]
C:@P[channel]
如果:%R%!=0
返回
如果:%C%==1024
C:@P[channel]
J:@P[total_num]
%J%分
如果尾

============================================================
==============================发红包变量==============================

##指定专属红包 8不指定 32口令红包 1024指定 65536语音红包
A:1024
##
##红包类型 1普通红包 2拼手气红包
B:2
##
##发送类型 1好友 3是群 4非好友
C:3
##
##红包金额 分为单位 不是元为单位
D:%随机数5-10%
##
##红包数量
E:1
##
##接收红包 群号或好友QQ号
F:%群号%
##
##红包标题 或 口令
G:邀请奖励
##
##指定发红包用|分割
H:%Code%

$红包 %A% %B% %C% %D% %E% %F% %G% %H%$

示例:
$红包 1024 1 3 1 1 714871405 给主人的红包 1959931179$

注意一下:豆豆现已关闭，1959931179是发送给谁的QQ，给主人红包是内容

============================================================

最后送大家一些颜色代码，可以使用在卡片里，虽说有些接口有，写插件还是有点不方便啦
1:#33FF33
2:#ff69b4
3:#C0D9D9
4:#FF2400
5:#99CC32
6:#CFB53B
7:#D19275
8:#000000 
9:#FF0000
0:#5F9F9F
A:%%随机数0-9%%
1:#856363
2:#FF6EC7
3:#00FF7F
4:#FF00FF
5:#00FF00
6:#FF00FF
7:#6B4226
8:#E47833
9:#EAADEA
0:#8E2323
B:%%随机数0-9%%
1:#9932CD
2:#DB70DB
3:#C0C0C0
4:#FF1CAE
5:#8E6B23
6:#6F4242
7:#238E23
8:#00FF7F
9:#9F9F5F
0:#4E2F2F
C:%%随机数0-9%%
1:%A%
2:%B%
3:%C%
%%随机数1-3%%

对应颜色↓

1白色 #FFFFFF
2红色#FF0000
3绿色#00FF00
4蓝色#0000FF
5牡丹红#FF00FF
6青色 #00FFFF
7黄色#FFFF00
8黑色#000000
9海蓝#70DB93
10巧克力色#5C3317
11蓝紫色 #9F5F9F
12黄铜色#B5A642
13亮金色#D9D919
14棕色#A67D3D
15青铜色 #8C7853
162号青铜色 #A67D3D
17士官服蓝色 #5F9F9F
18冷铜色 #D98719
19铜色 #B87333
20珊瑚红 #FF7F00
21紫蓝色 #42426F
22深棕 #5C4033
23深绿 #2F4F2F
24深铜绿色 #4A766E
25深橄榄绿 #4F4F2F
26深兰花色 #9932CD
27深紫色 #871F78
28深石板蓝 #6B238E
29深铅灰色 #2F4F4F
30深棕褐色 #97694F
32深绿松石色 #7093DB
33暗木色 #855E42
34淡灰色 #545454
35土灰玫瑰红色 #856363
36长石色 #D19275
37火砖色#8E2323
38森林绿 #238E23
39金色 #CD7F32
40鲜黄色 #DBDB70
41灰色 #C0C0C0
42铜绿色 #527F76
43青黄色 #93DB70
44猎人绿 #215E21
45印度红 #4E2F2F
46土黄色 #9F9F5F
47浅蓝色 #C0D9D9
48浅灰色 #A8A8A8
49浅钢蓝色 #8F8FBD
59浅木色 #E9C2A6
60石灰绿色 #32CD32
61桔黄色 #E47833
62褐红色 #8E236B
63中海蓝色 #32CD99
64中蓝色 #3232CD
65中森林绿 #6B8E23
66中鲜黄色 #EAEAAE
67中兰花色 #9370DB
68中海绿色 #426F42
69中石板蓝色 #7F00FF
70中春绿色 #7FFF00
71中绿松石色 #70DBDB
72中紫红色 #DB7093
73中木色 #A68064
74深藏青色 #2F2F4F
75海军蓝 #23238E
76霓虹篮 #4D4DFF
77霓虹粉红 #FF6EC7
78新深藏青色 #00009C
79新棕褐色 #EBC79E
80暗金黄色 #CFB53B
81橙色 #FF7F00
82橙红色 #FF2400
83淡紫色 #DB70DB
84浅绿色 #8FBC8F
85粉红色 #BC8F8F
86李子色 #EAADEA
87石英色 #D9D9F3
88艳蓝色 #5959AB
89鲑鱼色 #6F4242
90猩红色 #BC1717
91海绿色 #238E68
92半甜巧克力色 #6B4226
93赭色 #8E6B23
94银色 #E6E8FA
95天蓝 #3299CC
96石板蓝 #007FFF
97艳粉红色 #FF1CAE
98春绿色 #00FF7F
99钢蓝色 #236B8E
100亮天蓝色 #38B0DE
101棕褐色 #DB9370
102紫红色 #D8BFD8
103石板蓝色 #ADEAEA
104浓深棕色 #5C4033
105淡浅灰色 #CDCDCD
106紫罗兰色 #4F2F4F
107紫罗兰红色 #CC3299
108麦黄色#D8D8BF
109黄绿色 #99CC32

============================================================
==============================秀图变量==============================

±ximgtype 图片±
±ximg 40000-40005±

示例:

秀图|幻影|抖动|生日|爱你|征友
±rep %Msgbar%±
±strmsg %参数-1%±
如果:%IMG0%==
请带图片发送："秀图"\n请带图片发送："幻影"\n请带图片发送："抖动"\n请带图片发送："生日"\n请带图片发送："爱你"\n请带图片发送："征友"
返回
如果尾
如果:%参数-1%==秀图&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40000$
$回调 秀图处理$
返回
如果尾
如果:%参数-1%==幻影&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40001$
$回调 秀图处理$
返回
如果尾
如果:%参数-1%==抖动&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40002$
$回调 秀图处理$
返回
如果尾
如果:%参数-1%==生日&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40003$
$回调 秀图处理$
返回
如果尾
如果:%参数-1%==爱你&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40004$
$回调 秀图处理$
返回
如果尾
如果:%参数-1%==征友&%IMG0%!=
$写 %群号%/秀图写入 %QQ% %IMG0%$
$写 %群号%/秀图参数 %QQ% 40005$
$回调 秀图处理$

[内部]秀图处理
a:$读 %群号%/秀图写入 %QQ% 0$
b:$读 %群号%/秀图参数 %QQ% 0$
±ximgtype %b%±
±ximg %a%±


秀图需要授权哦

============================================================
==============================机器人运行时间变量==============================

获取主程序机器人运行时间
$时间格式 %RobotRunTime% yyyy-MM-dd HH:mm:ss.SSS EEEE$

获取当前时间截
%NDTime%

============================================================
==============================DIC词库运行时间转换剩余天数==============================

运行时间
$回调内部 内部运行时间$

[内部]内部运行时间
X:[%Time%-%RobotRunTime%]
D:[%X%/(60*60*24)]
H:[(%D%)/(60*60)]
M:[(%X%%(60*60))/60]
S:[%X%%60]
如果:%D%>0
%D%天%H%小时%M%分钟%S%秒
如果尾
如果:%H%>0
%H%小时%M%分钟%S%秒
返回
如果尾
如果:%M%>0
%M%分钟%S%秒
返回
如果尾
如果:%S%>=0
%S%秒
返回
如果尾
返回

============================================================
==============================匿名消息发送变量==============================

匿名消息
±anony 匿名±
这是一条匿名消息

============================================================
==============================转账检测变量==============================

转账检测
\[转账\]([\S\s]+)
如果:%Tfuin%!=
%Tfuin%\n
%Tfurl%\n
%Tftip%\n
%Tftitle%\n
%Tftext%\n
%TfAmounts%\n
如果尾
返回

============================================================
==============================图片转链接==============================

取图链接
如果:%IMG0%==
请携带图片
返回
如果尾
$图片链接 %IMG0%$


============================================================
==============================XML卡片代码变量==============================

换行 (&#x000A;)

空格 (&#x0020;) 

Tab (&#x0009;)

回车 (&#x000D;)

============================================================
==============================QQ表情变量==============================

##发送表情
测试
±facepro 720897±
±facenew 1±

##发送表情
测试
facepro:720897
facenew:1

##获取表情id
%FACEPRO0%
%FACEPRONUM%
%FACENEW0%
%FACENEWNUM%

注意:不能±facenew:1±
只能 facenew:1 或 ±facenew 1±

============================================================
============================================================


时间戳转换(.*)
$时间格式 %括号1% yyyy-MM-dd HH:mm:ss.SSS EEEE$

##获取pskey
群官网
A:%Json%
A:@A[pskey]
@A[qun.qq.com]

会员官网
A:%Json%
A:@A[pskey]
@A[vip.qq.com]##以此类推

##BKN值获取
测试
$BKN %Skey%$

##GKN值获取
测试
$GKN %Skey%$

============================================================
============================================================



##本地词库群收款
赞助 ?([0-9.]+)
A:%Json%
A:@A[pskey]
A:@A[tenpay.com]
B:$URLEncoder 打钱-小川川$
C:$URLEncoder [{"uin":"%QQ%","amount":"[%括号1%*100]"}]$
A:$访问 https://mqq.tenpay.com/cgi-bin/qcollect/qpay_collect_create.cgi?type=2&memo=%B%&amount=[%括号1%*100]&payer_list=%C%&num=1&recv_type=1&group_id=%群%&uin=%Robot%&pskey=%A%&skey=%A%&skey_type=2$
@%昵称%
±at %QQ%±\n
很感谢你的赞助！\n
订单申请成功，请支付订单！\n
订单号：@A[collection_no]\n
获得奖励：禁言套餐天卡*1\n
支付成功自动解除禁言！
$禁 %群% %QQ% 86400$
$发送$
$回调 支付判断@A[collection_no]$

[内部]支付判断(.*)
A:%Json%
A:@A[pskey]
A:@A[tenpay.com]
A:$访问 https://mqq.tenpay.com/cgi-bin/qcollect/qpay_collect_detail.cgi?collection_no=%括号1%&uin=%Robot%&pskey=%A%&skey=%A%&skey_type=2$
如果:@A[recv_amount]==0
$回调 支付判断%括号1%$
返回
如果尾
如果:@A[recv_amount]==1
$禁 %群% %QQ% 0$
@%昵称%
±at %QQ%±\n
订单号：%括号1%\n
支付状态：支付成功！\n
获得奖励：解禁卡*1\n
客官，欢迎下次再来！

============================================================
============================================================


QQ类接口
1.QQ头像接口，imgtype参数值为1到4
①.https://ssl.ptlogin2.qq.com/getface?imgtype=4&uin=QQ号码
②.http://q2.qlogo.cn/headimg_dl?dst_uin=QQ号码&spec=5

2.QQ群头像接口
http://p.qlogo.cn/gh/QQ群号码/QQ群号码/100/

3.QQ空间背景音乐接口
http://qzone-music.qq.com/fcg-bin/cgi_playlist_xml.fcg?g_tk=&json=1&uin=QQ号码
